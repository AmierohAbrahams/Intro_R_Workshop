[
["mapping-style.html", "Chapter 8 Mapping with style 8.1 Default maps 8.2 Specific labels 8.3 Scale bars 8.4 Insetting 8.5 Rounding it out", " Chapter 8 Mapping with style “How beautiful the world was when one looked at it without searching, just looked, simply and innocently.” — Hermann Hesse, Siddartha “You can’t judge a book by it’s cover but you can sure sell a bunch of books if you have a good one.” — Jayce O’Neal Now that we have learned the basics of creating a beautiful map in ggplot2 it is time to look at some of the more particular things we will need to make our maps extra stylish. There are also a few more things we need to learn how to do before our maps can be truly publication quality. If we have not yet loaded the tidyverse let’s do so. # Load libraries library(tidyverse) library(scales) # Load the function for creating scale bars source(&quot;functions/scale.bar.func.R&quot;) # Load Africa shape load(&quot;data/africa_coast.RData&quot;) 8.1 Default maps In order to access the default maps included with the tidyverse we will use the function borders(). ggplot() + borders() + # The global shape file coord_equal() # Equal sizing for lon/lat Figure 8.1: The built in global shape file. Jikes! It’s as simple as that to load a map of the whole planet. Usually we are not going to want to make a map of the entire planet, so let’s see how to focus on just South Africa. ggplot() + borders(regions = &quot;South Africa&quot;, colour = &quot;black&quot;, fill = &quot;grey70&quot;) + # Set colour and fill coord_equal() Figure 8.2: Built in map of South Africa. We see in the above map that the exclusion of the southern African countries bordering on South Africa give it the appearance of an island. Marion Island is also giving us issues. This isn’t great, so let’s consider a different option for selecting the area around South Africa. sa_1 &lt;- ggplot() + borders(fill = &quot;grey70&quot;, colour = &quot;black&quot;) + coord_equal(xlim = c(12, 36), ylim = c(-38, -22), expand = 0) # Force lon/lat extent sa_1 Figure 8.3: A better way to get the map of South Africa. That is a very tidy looking map of South(ern) Africa without needing to load any files. 8.2 Specific labels A map is almost always going to need some labels and other visual cues. We saw in the previous section how to add site labels. The following code chunk shows how this differs if we want to add just one label at a time. This can be useful if ecah label needs to be different from all other labels for whatever reason. We may also see that the text labels we are creating have \\n in them. When R sees these two characters together like this it reads this as an instruction to returndown a line. Let’s run the code to make sure we see what this means. sa_2 &lt;- sa_1 + annotate(&quot;text&quot;, label = &quot;Atlantic\\nOcean&quot;, x = 15.1, y = -32.0, size = 5.0, angle = 30, colour = &quot;navy&quot;) + annotate(&quot;text&quot;, label = &quot;Indian\\nOcean&quot;, x = 33.2, y = -34.2, size = 5.0, angle = 330, colour = &quot;springgreen&quot;) sa_2 Figure 8.4: Map of southern Africa with specific labels. 8.3 Scale bars With our fancy labels added, let’s insert a scale bar next. There is no default scale bar function in the tidyverse unfortunately, rather we will need to import one that has been created by a kind Samaritan. It is a bit finicky and often requires a bit of trial and error to get it to look exactly the way one wants. On the plus side, this also means we have a lot of control over the appearance of the scale bar. sa_3 &lt;- sa_2 + scaleBar(lon = 22.2, lat = -33.1, distanceLon = 200, distanceLat = 50, distanceLegend = 75, dist.unit = &quot;km&quot;, arrow.length = 150, arrow.distance = 95, arrow.North.size = 5) sa_3 Figure 8.5: Map of southern Africa with labels and a scale bar. 8.4 Insetting In order to inset a smaller map inside of a larger map we must first create the smaller map. Let’s make a map of Africa as a demonstration. The built in shape files that come with the tidyverse are not terribly useful for creating the outline of a given continent, so we will use the shape file of Africa that we already have saved on our computer. See if you can determine what each line of code is doing. africa_map &lt;- ggplot(data = africa_coast, aes(x = lon, y = lat)) + geom_polygon(aes(group = group), colour = &quot;black&quot;, fill = &quot;grey70&quot;) + borders(regions = &quot;South Africa&quot;, colour = &quot;black&quot;, fill = &quot;black&quot;, ylim = c(-34, -28)) + annotate(&quot;text&quot;, x = 15, y = 15, label = &quot;AFRICA&quot;, size = 4.5) + geom_rect(aes(xmin = 12, xmax = 36, ymin = -38, ymax = -22), fill = NA, colour = &quot;red&quot;) + coord_equal() + theme_void() + theme(panel.background = element_rect(fill = &quot;white&quot;, colour = &quot;black&quot;)) africa_map Figure 8.6: A quick map of Africa to be insetted in our southern Africa map. And now to inset this map of Africa into our map of southern Africa we will need to learn how to create a ‘grob’. This is very simple and does not require any extra work on our part. Remember that ggplot2 objects are different from normal objects (i.e. dataframes), and that they have their own way of storing and accessing data. In order to convert any sort of thing into a format that ggplot understands we convert it into a grob, as shown below. Once converted, we may then plop it onto our figure/map wherever we please. Both of these steps are accomplished with the single function annotation_custom(). This is also a good way to add logos or any other sort of image to a map/figure. You can really go completely bananas. It’s even possible to add GIFs. Such happy. Much excite. Very wonderment. sa_4 &lt;- sa_3 + annotation_custom(grob = ggplotGrob(africa_map), xmin = 21.3, xmax = 27.3, ymin = -30, ymax = -24) sa_4 Figure 8.7: Map of southern Africa, with labels, scale bar, and an inset map of Africa. 8.5 Rounding it out There are a lot of exciting things going on in our figure now. To round out our adventures in mapping let’s tweak the lon/alt labels to a more prestigious convention. There are two ways to do this. One of which requires us to install the scales package. Don’t worry, its’s a small one! sa_final &lt;- sa_4 + scale_x_continuous(breaks = seq(16, 32, 4), labels = scales::unit_format(&quot;°E&quot;, sep = &quot;&quot;), position = &quot;bottom&quot;) + scale_y_continuous(breaks = seq(-36, -24, 4), labels = c(&quot;36.0°S&quot;, &quot;32.0°S&quot;, &quot;28.0°S&quot;, &quot;24.0°S&quot;), position = &quot;right&quot;) + labs(x = &quot;&quot;, y = &quot;&quot;) sa_final Figure 8.8: The final map with all of the bells and whistles. And lastly we save the fruits of our labours. ggsave(plot = sa_final, filename = &quot;figures/southern_africa_final.pdf&quot;, height = 6, width = 8) "]
]
